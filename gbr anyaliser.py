import re
import matplotlib.pyplot as plt

# The string you provided
#data="*N1*M26*M15*D2*X5272Y8*M14*X5272Y0*X5826Y0*X5826Y8*M15*X5826Y0*M14*X6214Y0*X6219Y303*M15*X5926Y296*M14*X5926Y303*M15*X5928Y303*M14*X6219Y303*M15*X5928Y303*M14*X5886Y308*X5862Y312*X5839Y317*X5785Y332*X5731Y349*X5601Y395*X5471Y442*X5320Y493*X5159Y539*X5073Y559*X4987Y575*X4942Y581*X4897Y587*X4806Y594*X4805Y594*X4805Y586*M15*X4805Y594*M14*X4805Y594*X4638Y601*X4555Y604*X4472Y607*X4364Y608*X4257Y608*X4041Y610*X4041Y602*M15*X4041Y610*M14*X4039Y610*X4037Y610*X4035Y610*X4034Y609*X4036Y601*M15*X4034Y609*M14*X3978Y590*X3955Y579*X3933Y566*X3897Y538*X3867Y507*X3845Y478*X3823Y448*X3780Y397*X3780Y398*X3727Y366*X3673Y348*X3613Y338*X3551Y336*X3494Y339*X3440Y349*X3389Y366*X3338Y395*X3303Y436*X3261Y479*X3232Y499*X3215Y508*X3198Y515*X3158Y526*X3110Y531*X3109Y531*X3108Y531*X3061Y526*X3021Y515*X3003Y508*X2987Y499*X2958Y479*X2915Y436*X2880Y395*X2831Y365*X2780Y347*X2725Y337*X2667Y333*X2606Y335*X2547Y344*X2493Y361*X2438Y393*X2396Y444*X2374Y475*X2351Y505*X2322Y536*X2286Y565*X2264Y578*X2241Y590*X2185Y609*X2183Y601*M15*X2185Y609*M14*X2183Y610*X2182Y610*X2181Y610*X2178Y610*X2178Y610*X2178Y602*M15*X2178Y610*M14*X1962Y608*X1855Y608*X1747Y607*X1664Y604*X1581Y601*X1414Y594*X1413Y594*X1413Y586*M15*X1413Y594*M14*X1413Y594*X1321Y587*X1276Y581*X1232Y575*X1145Y559*X1060Y539*X898Y493*X748Y442*X618Y395*X487Y349*X434Y332*X379Y317*X356Y312*X333Y308*X291Y303*M15*X292Y296*M14*X292Y303*M15*X291Y303*M14*X0Y303*X4Y0*X393Y0*X393Y8*M15*X393Y0*M14*X947Y0*X947Y8*M15*X947Y0*M14*X2184Y0*X2185Y8*M15*X2184Y0*M14*X2369Y6*X2461Y13*X2553Y21*X2668Y30*X2784Y36*X2857Y38*X2931Y40*X3109Y40*X3109Y48*M15*X3110Y40*M14*X3287Y40*X3361Y38*X3435Y36*X3551Y30*X3666Y21*X3758Y13*X3850Y6*X4034Y0*X4034Y8*M15*X4034Y0*M14*X5272Y0*D2*M15*M15*X5319Y304M31*1"
#data="H1*G91*M70*D2*M15*N1*M26*X134Y143*M14*X173Y143*X213Y143*M15*X211Y218*M14*X172Y218*X132Y218*M15*X138Y245*M14*X177Y245*X216Y245*M15*X215Y320*M14*X175Y320*X136Y320*M15*X58Y359*M14*X50Y359*M15*X50Y517*M14*X58Y517*M15*X159Y507*M14*X159Y586*M15*X58Y674*M14*X50Y674*M15*X129Y751*M14*X208Y751*M15*X278Y719*M14*X286Y719*X286Y837*X50Y837*X50Y674*X50Y333*X50Y50*X286Y50*X286Y168*X278Y168*M15*X286Y168*M14*X286Y719*D2*M15*M70*M0*"
#data=r"*N9*M26*M15*M15*D2*X5172Y4396*M14*X5180Y4396*M15*X4257Y4790*M14*X4255Y4797*M15*X4357Y4788*M14*X4359Y4796*M15*X4356Y4003*M14*X4358Y3996*M15*X4256Y4002*M14*X4255Y3994*M15*X4788Y4059*M14*X4789Y4051*M15*X4964Y4396*M14*X4964Y4349*M15*X4964Y4396*M14*X4964Y4443*M15*X5128Y4204*M14*X5154Y4246*X5170Y4290*X5178Y4345*X5179Y4419*X5176Y4467*X5169Y4508*X5153Y4547*X5128Y4587*X5103Y4614*X5074Y4639*X5042Y4659*X4972Y4691*X4897Y4715*X4821Y4733*X4789Y4741*X4746Y4742*X4703Y4737*X4703Y4718*X4703Y4698*X4697Y4641*X4689Y4615*X4677Y4586*X4659Y4565*X4634Y4551*X4605Y4545*X4576Y4548*X4550Y4561*X4530Y4578*X4515Y4599*X4504Y4622*X4482Y4676*X4467Y4704*X4448Y4733*X4427Y4756*X4404Y4774*X4380Y4788*X4355Y4797*X4328Y4802*X4300Y4803*X4240Y4794*X4210Y4784*X4185Y4771*X4163Y4755*X4145Y4736*X4131Y4713*X4120Y4687*X4107Y4625*X4107Y4396*X4107Y4167*X4120Y4105*X4131Y4079*X4145Y4056*X4163Y4037*X4185Y4020*X4210Y4007*X4240Y3998*X4301Y3989*X4329Y3990*X4356Y3995*X4381Y4004*X4405Y4018*X4427Y4036*X4448Y4059*X4468Y4088*X4482Y4116*X4504Y4170*X4515Y4193*X4529Y4214*X4549Y4231*X4576Y4243*X4605Y4247*X4633Y4241*X4659Y4227*X4677Y4205*X4689Y4177*X4697Y4151*X4703Y4093*X4703Y4074*X4703Y4054*X4746Y4049*X4789Y4051*X4821Y4058*X4897Y4076*X4972Y4100*X5042Y4133*X5074Y4153*X5103Y4178*X5128Y4204*M15*X4149Y4386M31*9"
data="*N7*M26*M15*M15*D2*X5029Y4093*M14*X5027Y4100*M15*X5129Y4094*M14*X5131Y4101*M15*X4597Y4037*M14*X4597Y4045*M15*X4214Y3700*M14*X4206Y3700*M15*X5128Y3306*M14*X5130Y3298*M15*X5029Y3307*M14*X5026Y3300*M15*X4421Y3700*M14*X4421Y3747*M15*X4421Y3700*M14*X4421Y3653*M15*X5279Y3471*M14*X5279Y3700*X5279Y3929*X5266Y3991*X5255Y4017*X5240Y4040*X5222Y4059*X5201Y4075*X5175Y4088*X5146Y4098*X5084Y4107*X5056Y4106*X5029Y4101*X5004Y4092*X4981Y4078*X4958Y4060*X4937Y4037*X4918Y4008*X4903Y3980*X4882Y3926*X4870Y3902*X4856Y3882*X4836Y3865*X4809Y3852*X4781Y3849*X4752Y3855*X4727Y3869*X4709Y3891*X4696Y3919*X4689Y3945*X4683Y4002*X4683Y4022*X4683Y4042*X4640Y4046*X4596Y4045*X4564Y4038*X4488Y4019*X4413Y3996*X4344Y3963*X4312Y3942*X4283Y3918*X4258Y3892*X4232Y3849*X4215Y3805*X4207Y3751*X4206Y3676*X4209Y3629*X4217Y3587*X4232Y3549*X4258Y3509*X4283Y3482*X4312Y3457*X4343Y3436*X4413Y3404*X4488Y3381*X4564Y3363*X4596Y3355*X4640Y3353*X4683Y3358*X4683Y3378*X4683Y3397*X4689Y3455*X4696Y3481*X4709Y3509*X4726Y3531*X4752Y3545*X4781Y3551*X4809Y3547*X4836Y3535*X4855Y3518*X4870Y3497*X4882Y3473*X4904Y3420*X4918Y3391*X4937Y3363*X4959Y3340*X4981Y3321*X5005Y3308*X5030Y3299*X5057Y3294*X5085Y3293*X5146Y3302*X5175Y3311*X5201Y3324*X5222Y3341*X5240Y3360*X5255Y3383*X5266Y3409*X5279Y3471*M15*X5236Y3710M31*7"
data="""howPieceText=1
OutlineBoundary=0
FillBoundary=0
Uncut=1
AllowCut=1
PauseHere=0
FillColor=10944511
Smallindex=0
QuickPathIndex=0
BestVacRHS=0
BiteIndex=0
HighContrastText=0
GrainLinex=1
GrainLiney=0
LabelPrinted=0
SegmentCount=3
[Piece 10 Seg 0]
Tool=tRecipKnife
Color=0
PointCount=51
DoneToX=10000000000.0095
P0=677.19799,476.56540
P1=677.87909,468.35837
P2=679.97859,460.30400
P3=682.81003,453.41555
P4=686.34936,448.40375
P5=691.99751,442.57630
P6=700.16900,432.75446
P7=705.21496,425.07401
P8=706.71046,422.07942
P9=709.18941,414.54097
P10=709.90502,410.73932
P11=710.65093,403.11802
P12=711.45740,382.61333
P13=711.74249,374.68439
P14=711.78019,364.73710
P15=711.47518,354.48279
P16=710.72981,346.04686
P17=709.49040,338.15668
P18=705.69702,324.44378
P19=695.94555,313.02594
P20=684.09115,301.92989
P21=671.45326,292.26454
P22=661.05529,280.58351
P23=657.39909,265.66540
P24=771.39109,265.66540
P25=771.39109,687.46540
P26=657.39109,687.46540
P27=662.20929,670.39520
P28=674.32160,658.56901
P29=687.43043,648.13567
P30=699.31965,636.89305
P31=706.62465,625.23353
P32=709.57635,615.17630
P33=712.06415,602.58988
P34=712.08701,589.50318
P35=711.91555,580.83265
P36=712.14762,574.51238
P37=712.10589,570.29565
P38=711.73644,555.81685
P39=711.02290,548.55740
P40=709.78300,541.69324
P41=708.81168,538.13493
P42=706.70440,532.07039
P43=703.15644,524.79924
P44=699.15536,519.01018
P45=686.96628,505.83357
P46=682.23606,498.12863
P47=679.03821,489.77221
P48=677.37746,480.67193
P49=677.19799,476.56540
P50=679.19608,476.47808
[Piece 10 Seg 1]
Tool=tPen
Color=16711680
PointCount=2
DoneToX=10000000000.0095
P0=714.39534,463.86290
P1=723.53934,463.86290
[Piece 10 Seg 2]
Tool=tRecipKnife
Color=0
PointCount=2
DoneToX=10000000000.0095
P0=771.39109,476.56540
P1=768.39109,476.56540
[Piece 11]
OrigPieceNumber=13

"""
# Extract all points with the pattern "X<number>Y<number>"
#points = re.findall(r'X(\d+)Y(\d+)', data)
points= re.findall(r"P\d*=(\d*.\d*),(\d*.\d*)",data)
# Convert extracted points to a list of tuples (x, y)
#coordinates = [(int(x), int(y)) for x, y in points]
coordinates = [(float(x), float(y)) for x, y in points]

# Plot the points
plt.figure(figsize=(10, 8))
for i, (x, y) in enumerate(coordinates):
    # Label each point
    if i%2==1:
        plt.text(x, y, f'{i}', fontsize=12, ha='right', color='blue')
    else:
        plt.text(x, y, f'{i}', fontsize=12, ha='right', color='blue')
    plt.scatter(x, y, color='red')

# Set labels and title
plt.xlabel('X Coordinate')
plt.ylabel('Y Coordinate')
plt.title('Plot of Points from the String')

# Show grid and plot
plt.grid(True)
plt.show()